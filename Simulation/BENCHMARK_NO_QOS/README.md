# Installation

This folder contains p4app script to launch the benchmark with no QOS simulation to launch the simulation you must have P4APP installed:
```shell
sudo apt-get install docker
docker pull p4lang/p4app
```
You can also install p4app from their depository: https://github.com/p4lang/p4app

# Run

To run p4app, either you copy it in your bin with
```shell
cp p4app /usr/local/bin
```
And you can call it direclty with :
```shell
p4app run BENCHMARK.p4app
```
Either you can use it direclty in the workind direcltory with:
```shell
./p4app run BENCHMARK.p4app
```

# File Description

- "input_topo.txt" is the input file to use with the topology_manager script to generate the needed files for p4app if a change is needed
- "analysis_topo.txt" is the input file for the analysis script.
These two files are automatically generated by the TopologyManager

Inside SPQ.p4app and BENCHMARK.p4app you will find :
- "commands_n.txt" and "topo.txt" that are also automatically generated by the TopologyManager
- "send_afdx_packet.py" that can generate and send packets, this file is also automatically generated by the TopologyManager
- "send_all_packets.sh" this bash script launch all packet generation and sending files on the hosts, it also automatically generated by the TopologyManager

"sniffer.sh" this bash script launch tcpdump commands on the hosts and saves pcap results to /tmp/p4app_logs, it also automatically generated by the TopologyManager. These pcap files can be analysed using the analyser.py tool

# Usefull commands:

To launch p4app packet in mininet:
```shell
p4app run package.p4app
```

To connect to host h1:
```shell
p4app exec m h1 bash 
```
 
to launch wireshark on switch s1:
```shell
p4app exec m s1 tcpdump -Uw - | wireshark -ki - 
```
  
To listen to a switch/specific card traffic (s1-eth3 for example):
```shell
p4app exec tcpdump -i s1-eth3 
```
